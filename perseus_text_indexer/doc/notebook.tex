
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{Concordances Next Generation}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \section{More powerful concordances}\label{more-powerful-concordances}

    In this notebook, we show how we can leverage Python NLTK, CTS-compliant
texts and treebanks to create some powerful concordances with just a few
lines of code.

It is amazing how much you can accomplish with Python NLTK! In this
case, it is sufficient to override a couple of methods of the classes in
the \href{http://www.nltk.org/_modules/nltk/text.html}{text} modules and
you can really have a lot of fun...

I will also make use of my special \href{}{corpus reader} for
cts-compliant texts, which will make it easier for us to load and
tokenize Perseus' and 1stKYearsOfGreek texts, as well as to keep tokens
in sync with the citations

    In what are our concordances better?

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  They include a \textbf{canonical citation} for each occurrence
  (something which you don't find often in corpus investigation tools)
\item
  The indexing is very \textbf{flexible}! they support indexing for:

  \begin{itemize}
  \tightlist
  \item
    simple form (vanilla concordances)
  \item
    lemma
  \item
    morpho-tag
  \item
    ... in brief: every metadata you want to append to your tokens!
  \end{itemize}
\end{enumerate}

In what follows we see how to create these concordances with a few lines
of code

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} \PY{k+kn}{import} \PY{n+nn}{sys}
        \PY{n}{sys}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{../}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
        \PY{n}{sys}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{../../}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}10}]:} \PY{k+kn}{from} \PY{n+nn}{cite\PYZus{}corpus\PYZus{}reader} \PY{k}{import} \PY{n}{CapitainCorpusReader}
         \PY{k+kn}{from} \PY{n+nn}{perseus\PYZus{}text} \PY{k}{import} \PY{n}{CitableConcordanceIndex}
         \PY{k+kn}{import} \PY{n+nn}{os}
         \PY{c+c1}{\PYZsh{} we use etree to parse the treebank XML: if you mycapitain, then you also have lxml...}
         \PY{k+kn}{from} \PY{n+nn}{lxml} \PY{k}{import} \PY{n}{etree}
\end{Verbatim}


    \section{Set up}\label{set-up}

    Now we load a series of sample files: * the treebanks of the tragedies
of Aeschylus * the TEI editions of Aeschylus from the Perseus DL

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}11}]:} \PY{n}{pers\PYZus{}root} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{expanduser}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZti{}/cltk\PYZus{}data/greek/text/canonical\PYZhy{}greekLit\PYZhy{}master/data}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{tb\PYZus{}root} \PY{o}{=} \PY{n}{os}\PY{o}{.}\PY{n}{path}\PY{o}{.}\PY{n}{expanduser}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZti{}/Documents/lavoro/treebank/files/AGDT2.X/PerseusDL\PYZhy{}treebank\PYZus{}data\PYZhy{}96df3cc/v2.1/Greek/texts}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \subsection{The simple text of Aeschylus'
editions}\label{the-simple-text-of-aeschylus-editions}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}16}]:} \PY{n}{aesch\PYZus{}corpus} \PY{o}{=} \PY{n}{CapitainCorpusReader}\PY{p}{(}\PY{n}{pers\PYZus{}root}\PY{p}{,} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{tlg0085/tlg.+/tlg.+grc2}\PY{l+s+s2}{\PYZbs{}}\PY{l+s+s2}{.xml}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{aesch\PYZus{}corpus}\PY{o}{.}\PY{n}{fileids}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}16}]:} ['tlg0085/tlg001/tlg0085.tlg001.perseus-grc2.xml',
          'tlg0085/tlg002/tlg0085.tlg002.perseus-grc2.xml',
          'tlg0085/tlg003/tlg0085.tlg003.perseus-grc2.xml',
          'tlg0085/tlg004/tlg0085.tlg004.perseus-grc2.xml',
          'tlg0085/tlg005/tlg0085.tlg005.perseus-grc2.xml',
          'tlg0085/tlg006/tlg0085.tlg006.perseus-grc2.xml',
          'tlg0085/tlg007/tlg0085.tlg007.perseus-grc2.xml']
\end{Verbatim}
            
    Now we save cites and words in two variables that we'll use later on

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}17}]:} \PY{n}{cite\PYZus{}words} \PY{o}{=} \PY{n}{aesch\PYZus{}corpus}\PY{o}{.}\PY{n}{corpus\PYZus{}cite\PYZus{}words}\PY{p}{(}\PY{p}{)}
         \PY{n}{aesch\PYZus{}tokens} \PY{o}{=} \PY{p}{[}\PY{n}{t}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{cite\PYZus{}words}\PY{p}{]}
         \PY{n}{aesch\PYZus{}cites} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{:}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{t}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{t}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{t} \PY{o+ow}{in} \PY{n}{cite\PYZus{}words}\PY{p}{]}
\end{Verbatim}


    \subsection{Aeschylus treebank}\label{aeschylus-treebank}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}15}]:} \PY{c+c1}{\PYZsh{} I\PYZsq{}ll use glob to speed up the parsing of the xml files}
         \PY{k+kn}{from} \PY{n+nn}{glob} \PY{k}{import} \PY{n}{glob}
         \PY{n}{aes\PYZus{}tb\PYZus{}files} \PY{o}{=} \PY{n}{glob}\PY{p}{(}\PY{n}{tb\PYZus{}root}\PY{o}{+}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{/tlg0085*.xml}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{aesch\PYZus{}tb\PYZus{}words} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         
         \PY{k}{for} \PY{n}{f} \PY{o+ow}{in} \PY{n}{aes\PYZus{}tb\PYZus{}files}\PY{p}{:}
             \PY{n}{x} \PY{o}{=} \PY{n}{etree}\PY{o}{.}\PY{n}{parse}\PY{p}{(}\PY{n}{f}\PY{p}{)}
             \PY{n}{ws} \PY{o}{=} \PY{n}{x}\PY{o}{.}\PY{n}{xpath}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{//word[@cite]}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
             \PY{n}{aesch\PYZus{}tb\PYZus{}words}\PY{o}{.}\PY{n}{extend}\PY{p}{(}\PY{n}{ws}\PY{p}{)}
\end{Verbatim}


    Here we make every treebank token in Aeschylus as a tuple with: form,
lemma, postag, relation. We'll use these attributes later to index the
entries in the tragedies

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}46}]:} \PY{n}{tbcites} \PY{o}{=} \PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{:}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{join}\PY{p}{(}\PY{n}{w}\PY{o}{.}\PY{n}{attrib}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{cite}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{o}{.}\PY{n}{split}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{w} \PY{o+ow}{in} \PY{n}{aesch\PYZus{}tb\PYZus{}words}\PY{p}{]}
         \PY{n}{tbtokens} \PY{o}{=} \PY{p}{[}\PY{p}{(}\PY{n}{w}\PY{o}{.}\PY{n}{attrib}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{form}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{w}\PY{o}{.}\PY{n}{attrib}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{lemma}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} 
                      \PY{n}{w}\PY{o}{.}\PY{n}{attrib}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{postag}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{,} \PY{n}{w}\PY{o}{.}\PY{n}{attrib}\PY{p}{[}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{relation}\PY{l+s+s2}{\PYZdq{}}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{w} \PY{o+ow}{in} \PY{n}{aesch\PYZus{}tb\PYZus{}words}\PY{p}{]}
\end{Verbatim}


    \section{The concordances}\label{the-concordances}

    \subsection{Simple-text concordances}\label{simple-text-concordances}

    Creating a concordance index is as easy as this:

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}23}]:} \PY{n}{aesch\PYZus{}index} \PY{o}{=} \PY{n}{CitableConcordanceIndex}\PY{p}{(}\PY{n}{aesch\PYZus{}tokens}\PY{p}{,} \PY{n}{aesch\PYZus{}cites}\PY{p}{)}
\end{Verbatim}


    Now let's use this object to print the first 10 occurrence of the word
ἄναξ

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}24}]:} \PY{n}{aesch\PYZus{}index}\PY{o}{.}\PY{n}{print\PYZus{}concordance}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ἄναξ}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{lines}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Displaying 10 of 31 matches:
λιπεῖν ἔτλητε ; τίς κατέσκηψεν τύχη ; ἄναξ Πελασγῶν , αἰόλʼ ἀνθρώπων κακά . πόνο (tlg0085.tlg001:328)
 κλῦθί μου πρόφρονι καρδίᾳ , Πελασγῶν ἄναξ . ἴδε με τὰν ἱκέτιν φυγάδα περίδρομον (tlg0085.tlg001:349)
πειθὼ δʼ ἕποιτο καὶ τύχη πρακτήριος . ἄναξ ἀνάκτων , μακάρων μακάρτατε καὶ τελέω (tlg0085.tlg001:524)
ις ; αὐτὸς ὁ πατὴρ φυτουργὸς αὐτόχειρ ἄναξ γένους παλαιόφρων μέγας τέκτων , τὸ π (tlg0085.tlg001:592)
τοιάνδʼ ἔπειθεν ῥῆσιν ἀμφʼ ἡμῶν λέγων ἄναξ Πελασγῶν , ἱκεσίου Ζηνὸς κότον μέγαν  (tlg0085.tlg001:616)
οὐ κατοικτιεῖ . διωλόμεσθʼ · ἄσεπτʼ , ἄναξ , πάσχομεν — πολλοὺς ἄνακτας , παῖδας (tlg0085.tlg001:904)
άσκεις ; τὰ θεῶν μηδὲν ἀγάζειν . Ζεὺς ἄναξ ἀποστεροί - η γάμον δυσάνορα δάιον ,  (tlg0085.tlg001:1062)
ων φύλακες , κατὰ πρεσβείαν οὓς αὐτὸς ἄναξ Ξέρξης βασιλεὺς Δαρειογενὴς εἵλετο χώ (tlg0085.tlg002:5)
έφθιτο καὶ νὺξ ἐπῄει , πᾶς ἀνὴρ κώπης ἄναξ ἐς ναῦν ἐχώρει πᾶς θʼ ὅπλων ἐπιστάτης (tlg0085.tlg002:378)
ξεκείνωσεν πεσόν , ἐξ οὗτε τιμὴν Ζεὺς ἄναξ τήνδʼ ὤπασεν , ἕνʼ ἄνδρʼ ἁπάσης Ἀσίδο (tlg0085.tlg002:762)

    \end{Verbatim}

    Cool, we have the lines and the (sort of) canonical citations (but we
can make it 100\% canonical if we want...)

Can we make it prettier?

Sure! the \texttt{find\_concordance} method locates all the information
we need and returns a list of matches with context. Then we can format
it with html, or anyway we want...

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}33}]:} \PY{n}{conc} \PY{o}{=} \PY{n}{aesch\PYZus{}index}\PY{o}{.}\PY{n}{find\PYZus{}concordance}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ἄναξ}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
         \PY{n}{conc}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}33}]:} ConcordanceLine(left=['.', 'δοκεῖτε', 'δή', 'μοι', 'τῆσδε', 'κοινωνεῖν', 'χθονὸς', 'τἀρχαῖον', '.', 'ἀλλὰ', 'πῶς', 'πατρῷα', 'δώματα', 'λιπεῖν', 'ἔτλητε', ';', 'τίς', 'κατέσκηψεν', 'τύχη', ';'], query='ἄναξ', right=['Πελασγῶν', ',', 'αἰόλʼ', 'ἀνθρώπων', 'κακά', '.', 'πόνου', 'δʼ', 'ἴδοις', 'ἂν', 'οὐδαμοῦ', 'ταὐτὸν', 'πτερόν', '·', 'ἐπεὶ', 'τίς', 'ηὔχει', 'τήνδʼ', 'ἀνέλπιστον'], offset=1759, cite='tlg0085.tlg001:328', left\_print='λιπεῖν ἔτλητε ; τίς κατέσκηψεν τύχη ;', right\_print='Πελασγῶν , αἰόλʼ ἀνθρώπων κακά . πόνο', line='λιπεῖν ἔτλητε ; τίς κατέσκηψεν τύχη ; ἄναξ Πελασγῶν , αἰόλʼ ἀνθρώπων κακά . πόνο')
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}34}]:} \PY{n}{h} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{\PYZlt{}ul\PYZgt{}}\PY{l+s+se}{\PYZbs{}n}\PY{l+s+s2}{\PYZdq{}}
         \PY{k}{for} \PY{n}{c} \PY{o+ow}{in} \PY{n}{conc}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{10}\PY{p}{]}\PY{p}{:}
             \PY{n}{h} \PY{o}{+}\PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZlt{}li\PYZgt{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{ \PYZlt{}span style=}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{color:blue}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{\PYZgt{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZlt{}/span\PYZgt{} }\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{ (\PYZlt{}span style=}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{color:green}\PY{l+s+s1}{\PYZdq{}}\PY{l+s+s1}{\PYZgt{}}\PY{l+s+si}{\PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZlt{}/span\PYZgt{})\PYZlt{}/li\PYZgt{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{c}\PY{o}{.}\PY{n}{left\PYZus{}print}\PY{p}{,}
                                                                                                                \PY{n}{c}\PY{o}{.}\PY{n}{query}\PY{p}{,}
                                                                                                                \PY{n}{c}\PY{o}{.}\PY{n}{right\PYZus{}print}\PY{p}{,}
                                                                                                                \PY{n}{c}\PY{o}{.}\PY{n}{cite}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}35}]:} \PY{k+kn}{from} \PY{n+nn}{IPython}\PY{n+nn}{.}\PY{n+nn}{display} \PY{k}{import} \PY{n}{HTML}
         \PY{n}{HTML}\PY{p}{(}\PY{n}{h}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}35}]:} <IPython.core.display.HTML object>
\end{Verbatim}
            
    So we learn that there are 31 occurrences of ἄναξ in Aeschylus. What
about the other forms of this word?

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}36}]:} \PY{n}{aesch\PYZus{}index}\PY{o}{.}\PY{n}{print\PYZus{}concordance}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ἄνακτος}\PY{l+s+s2}{\PYZdq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Displaying 5 of 5 matches:
γός , τῆσδε γῆς ἀρχηγέτης . ἐμοῦ δʼ ἄνακτος εὐλόγως ἐπώνυμον γένος Πελασγῶν τήν (tlg0085.tlg001:252)
ἱδρῦσθαι χθονός . τῆλε πρὸς δυσμαῖς ἄνακτος Ἡλίου φθινασμάτων . ἀλλὰ μὴν ἵμειρʼ (tlg0085.tlg002:232)
χέρσον ἐληλαμέναι πέρι πύργον τοῦδʼ ἄνακτος ἄιον , Ἕλλας τʼ ἀμφὶ πόρον πλατὺν ε (tlg0085.tlg002:873)
γένοιτο δʼ οὖν μολόντος εὐφιλῆ χέρα ἄνακτος οἴκων τῇδε βαστάσαι χερί . τὰ δʼ ἄλ (tlg0085.tlg005:35)
τὰ μάσσω μὲν τί δεῖ σέ μοι λέγειν ; ἄνακτος αὐτοῦ πάντα πεύσομαι λόγον . ὅπως δ (tlg0085.tlg005:599)

    \end{Verbatim}

    How do we find them all?

    \subsection{Annotation-based
concordances}\label{annotation-based-concordances}

    If we have a lemmatized corpus (e.g. a treebank) we could use the same
expanded concurdance indexer to create a similar list that searches for
lemmata instead of forms.

Above we read the treebank files and created a list of tokens with some
addition information. E.g.:

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}38}]:} \PY{n}{tbtokens}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}38}]:} ('ἐπίδοι', 'ἐπεῖδον', 'v3saoa---', 'PRED')
\end{Verbatim}
            
    Now let's create a concordance indexer that makes use of lemmata instead
of forms. Instead of passing a list of forms to the constructor, we pass
a list of tuples and we specify the function (\texttt{key}) of the
column we want to index for; in this case, the lemma is the second
element in the tuple (indexed 1)

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}48}]:} \PY{n}{tbindex} \PY{o}{=} \PY{n}{CitableConcordanceIndex}\PY{p}{(}\PY{n}{tbtokens}\PY{p}{,} \PY{n}{tbcites}\PY{p}{,} \PY{n}{key}\PY{o}{=}\PY{k}{lambda} \PY{n}{x}\PY{p}{:}\PY{n}{x}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    With the argument \texttt{key} we passed a function that for every
element in a list of iterable return the element indexed 1 (the lemma in
this case); this function is used to create the lemma index. The default
function of the class constructor (the one that we used before) is:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{lambda}\NormalTok{ x : x}
\end{Highlighting}
\end{Shaded}

That is, a function that merely returns the element passed and does
nothing with it.

Now, let's see if we can use this indexer to get concordances of all the
forms of ἄναξ in Aeschylus

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}49}]:} \PY{n}{tbindex}\PY{o}{.}\PY{n}{print\PYZus{}concordance}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ἄναξ}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{lines}\PY{o}{=}\PY{l+m+mi}{20}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Displaying 20 of 40 matches:
ροις νυν ἐσθλὰ κηρυκευέτω . πάντων δ̓ ἀνάκτων τῶνδε κοινοβωμίαν σέβεσθ̓ · ἐν ἁγνῷ δ (tlg0085.tlg001:222)
ασγός , τῆσδε γῆς ἀρχηγέτης . ἐμοῦ δ̓ ἄνακτος εὐλόγως ἐπώνυμον γένος Πελασγῶν τήνδε (tlg0085.tlg001:252)
λιπεῖν ἔτλητε ; τίς κατέσκηψεν τύχη ; ἄναξ Πελασγῶν , αἰόλ̓ ἀνθρώπων κακά . πόνο (tlg0085.tlg001:328)
 κλῦθί μου πρόφρονι καρδίᾳ , Πελασγῶν ἄναξ . ἴδε με τὰν ἱκέτιν φυγάδα περίδρομον (tlg0085.tlg001:349)
πειθὼ δ̓ ἕποιτο καὶ τύχη πρακτήριος . ἄναξ ἀνάκτων , μακάρων μακάρτατε καὶ τελέω (tlg0085.tlg001:524)
 δ̓ ἕποιτο καὶ τύχη πρακτήριος . ἄναξ ἀνάκτων , μακάρων μακάρτατε καὶ τελέων τελειό (tlg0085.tlg001:524)
ις ; αὐτὸς ὁ πατὴρ φυτουργὸς αὐτόχειρ ἄναξ γένους παλαιόφρων μέγας τέκτων , τὸ π (tlg0085.tlg001:592)
τοιάνδ̓ ἔπειθεν ῥῆσιν ἀμφ̓ ἡμῶν λέγων ἄναξ Πελασγῶν , ἱκεσίου Ζηνὸς κότον μέγαν  (tlg0085.tlg001:616)
οὐ κατοικτιεῖ . διωλόμεσθ̓ · ἄσεπτ̓ , ἄναξ , πάσχομεν - πολλοὺς ἄνακτας , παῖδας (tlg0085.tlg001:904)
 · ἄσεπτ̓ , ἄναξ , πάσχομεν - πολλοὺς ἄνακτας , παῖδας Αἰγύπτου τάχα ὄψεσθε · θαρσε (tlg0085.tlg001:905)
άσκεις ; τὰ θεῶν μηδὲν ἀγάζειν . Ζεὺς ἄναξ ἀποστεροί - η γάμον δυσάνορα δάιον ,  (tlg0085.tlg001:1062)
ων φύλακες , κατὰ πρεσβείαν οὓς αὐτὸς ἄναξ Ξέρξης βασιλεὺς Δαρειογενὴς εἵλετο χώ (tlg0085.tlg002:5)
ν ἱδρῦσθαι χθονός . τῆλε πρὸς δυσμαῖς ἄνακτος Ἡλίου φθινασμάτων . ἀλλὰ μὴν ἵμειῤ ἐ (tlg0085.tlg002:232)
έφθιτο καὶ νὺξ ἐπῄει , πᾶς ἀνὴρ κώπης ἄναξ ἐς ναῦν ἐχώρει πᾶς θ̓ ὅπλων ἐπιστάτης (tlg0085.tlg002:378)
 πάννυχοι δὴ διάπλοον καθίστασαν ναῶν ἄνακτες πάντα ναυτικὸν λεών . καὶ νὺξ ἐχώρει  (tlg0085.tlg002:383)
ριστοι κεὐγένειαν ἐκπρεπεῖς , αὐτῷ τ̓ ἄνακτι πίστιν ἐν πρώτοις ἀεί , τεθνᾶσιν αἰσχ (tlg0085.tlg002:443)
ἵ τ̓ Ἰαόνων χέρες . τυτθὰ δ̓ ἐκφυγεῖν ἄνακτ̓ αὐτὸν εἰσακούομεν Θρῄκης ἂμ πεδιήρεις (tlg0085.tlg002:564)
ξεκείνωσεν πεσόν , ἐξ οὗτε τιμὴν Ζεὺς ἄναξ τήνδ̓ ὤπασεν , ἕν̓ ἄνδῤ ἁπάσης Ἀσίδο (tlg0085.tlg002:762)
εῖμεν πήματ̓ ἔρξαντες τόσα . τί οὖν , ἄναξ Δαρεῖε , ποῖ καταστρέφεις λόγων τελευ (tlg0085.tlg002:787)
ὰ χέρσον ἐληλαμέναι πέρι πύργον τοῦδ̓ ἄνακτος ἄιον , Ἕλλας τ̓ ἀμφὶ πόρον πλατὺν εὐχ (tlg0085.tlg002:873)

    \end{Verbatim}

    \subsection{More complex indexing}\label{more-complex-indexing}

    Can we make concordances of the main predicates in Aeschylus or the
subjects?

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}55}]:} \PY{n}{syntindex} \PY{o}{=} \PY{n}{CitableConcordanceIndex}\PY{p}{(}\PY{n}{tbtokens}\PY{p}{,} \PY{n}{tbcites}\PY{p}{,} \PY{n}{key}\PY{o}{=}\PY{k}{lambda} \PY{n}{x}\PY{p}{:}\PY{n}{x}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}\PY{p}{)}
         \PY{n}{syntindex}\PY{o}{.}\PY{n}{print\PYZus{}concordance}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{PRED}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{lines}\PY{o}{=}\PY{l+m+mi}{20}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Displaying 20 of 1987 matches:
 ἐπίδοι προφρόνως στόλον ἡμέτερον νάιον ἀρθέν (tlg0085.tlg001:1)
ίαν δὲ λιποῦσαι χθόνα σύγχορτον Συρίᾳ φεύγομεν , οὔτιν̓ ἐφ̓ αἵματι δημηλασίαν ψήφῳ π (tlg0085.tlg001:5)
σίαρχος τάδε πεσσονομῶν κύδιστ̓ ἀχέων ἐπέκρανε , φεύγειν ἀνέδην διὰ κῦμ̓ ἅλιον , κέλ (tlg0085.tlg001:13)
ίν̓ ἂν οὖν χώραν εὔφρονα μᾶλλον τῆσδ̓ ἀφικοίμεθα σὺν τοῖσδ̓ ἱκετῶν ἐγχειριδίοις ἐριοστ (tlg0085.tlg001:20)
τὴρ τρίτος , οἰκοφύλαξ ὁσίων ἀνδρῶν , δέξασθ̓ ἱκέτην τὸν θηλυγενῆ στόλον αἰδοίῳ πνε (tlg0085.tlg001:27)
̓ ἐν ἀσώδει θεῖναι , ξὺν ὄχῳ ταχυήρει πέμψατε πόντονδ̓ · ἔνθα δὲ λαίλαπι χειμωνοτύπ (tlg0085.tlg001:33)
ις , τὰ δ̓ ἄελπτά περ ὄντα φανεῖται . γνώσεται δὲ λόγους τις ἐν μάκει . εἰ δὲ κυρεῖ  (tlg0085.tlg001:56)
πόλων ἔγγαιος οἶκτον [οἰκτρὸν] ἀίων , δοξάσει τις ἀκούειν ὄπα τᾶς Τηρεΐας Μήτιδος ο (tlg0085.tlg001:60)
ὶ ἐγὼ φιλόδυρ - τος Ἰαονίοισι νόμοισι δάπτω τὰν ἁπαλὰν Νειλοθερῆ παρειὰν ἀπειρόδα (tlg0085.tlg001:70)
ις ἐστὶ κηδεμών . ἀλλά , θεοὶ γενέται κλύετ̓ εὖ τὸ δίκαιον ἰδόντες · ἥβᾳ μὴ τέλεον (tlg0085.tlg001:78)
αἶσαν , ὕβριν δ̓ ἑτοίμως στυγοῦντες , πέλοιτ̓ ἂν ἔνδικοι γάμοις . ἔστι δὲ κἀκ πολέμ (tlg0085.tlg001:82)
γοῦντες , πέλοιτ̓ ἂν ἔνδικοι γάμοις . ἔστι δὲ κἀκ πολέμου τειρομένοις βωμὸς ἀρῆς (tlg0085.tlg001:83)
φυγάσιν ῥῦμα , δαιμόνων σέβας . εὖ δ̓ εἴη Διόθεν παναληθῶς . Διὸς ἵμερος οὐκ εὐ (tlg0085.tlg001:86)
παναληθῶς . Διὸς ἵμερος οὐκ εὐθήρατος ἐτύχθη . παντᾷ τοι φλεγέθει κἀν σκότῳ μελαίν (tlg0085.tlg001:87)
ερος οὐκ εὐθήρατος ἐτύχθη . παντᾷ τοι φλεγέθει κἀν σκότῳ μελαίνᾳ ξὺν τύχᾳ μερόπεσσι  (tlg0085.tlg001:88)
τῳ μελαίνᾳ ξὺν τύχᾳ μερόπεσσι λαοῖς . πίπτει δ̓ ἀσφαλὲς οὐ δ̓ ἐπὶ νώτῳ , κορυφᾷ Δι (tlg0085.tlg001:91)
ειον . δαυλοὶ γὰρ πραπίδων δάσκιοί τε τείνουσιν πόροι κατιδεῖν ἄφραστοι . ἰάπτει δ̓ ἐ (tlg0085.tlg001:94)
ονίων . ἥμενος ὃν φρόνημά πως αὐτόθεν ἐξέπραξεν ἔμπας ἑδράνων ἐφ̓ ἁγνῶν . ἰδέσθω δ̓ ε (tlg0085.tlg001:102)
ν ἐξέπραξεν ἔμπας ἑδράνων ἐφ̓ ἁγνῶν . ἰδέσθω δ̓ εἰς ὕβριν βρότειον , οἵα νεάζει πυ (tlg0085.tlg001:104)
αγνούς . τοιαῦτα πάθεα μέλεα θρεομένα λέγω λιγέα βαρέα δακρυοπετῆ , ἰὴ ἰή , ἰηλέ (tlg0085.tlg001:112)

    \end{Verbatim}

    (\textbf{WARNING}: the formatting is not handled well when the matching
token is at the beginning of the corpus. Also, I expect that the
concordance will consider the ending of preciding text as "context" in
case the match comes at the beginning of a new text...)

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}56}]:} \PY{n}{syntindex}\PY{o}{.}\PY{n}{print\PYZus{}concordance}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{SBJ}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{lines}\PY{o}{=}\PY{l+m+mi}{10}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Displaying 10 of 2337 matches:
 Ζεὺς μὲν ἀφίκτωρ ἐπίδοι προφρόνως στόλον ἡ (tlg0085.tlg001:1)
γύπτου παίδων ἀσεβῆ ̓ ξονοταζόμεναι . Δαναὸς δὲ πατὴρ καὶ βούλαρχος καὶ στασίαρχος (tlg0085.tlg001:11)
ον , κέλσαι δ̓ Ἄργους γαῖαν , ὅθεν δὴ γένος ἡμέτερον τῆς οἰστροδόνου βοὸς ἐξ ἐπαφ (tlg0085.tlg001:16)
ες , ὄλοιντο , πρίν ποτε λέκτρων , ὧν θέμις εἴργει , σφετεριξάμενοι πατραδέλφειαν (tlg0085.tlg001:37)
ιν · ἐπωνυμίᾳ δ̓ ἐπεκραίνετο μόρσιμος αἰὼν εὐλόγως , Ἔπαφόν τ̓ ἐγέννασεν · ὅντ̓  (tlg0085.tlg001:46)
 ἐπιδείξω πιστὰ τεκμήρια γαιονόμοις , τὰ δ̓ ἄελπτά περ ὄντα φανεῖται . γνώσετα (tlg0085.tlg001:55)
ερ ὄντα φανεῖται . γνώσεται δὲ λόγους τις ἐν μάκει . εἰ δὲ κυρεῖ τις πέλας οἰων (tlg0085.tlg001:57)
 δὲ λόγους τις ἐν μάκει . εἰ δὲ κυρεῖ τις πέλας οἰωνοπόλων ἔγγαιος οἶκτον [οἰκτ (tlg0085.tlg001:58)
γαιος οἶκτον [οἰκτρὸν] ἀίων , δοξάσει τις ἀκούειν ὄπα τᾶς Τηρεΐας Μήτιδος οἰκτρ (tlg0085.tlg001:60)
τρᾶς ἀλόχου , κιρκηλάτου τ̓ ἀηδόνος , ἅτ̓ ἀπὸ χλωρῶν πετάλων ἐργομένα πενθεῖ μὲ (tlg0085.tlg001:63)

    \end{Verbatim}

    Now let's try with indexing based on morphology. As it can be seen, the
indexer is rather flexible: you can devise whatever function you can
imagine and pass it to the constructor as key instead of the
"throw-away" lambda function.

However, the easiest solution for morphology based indexing is to
"massage" the morpho tag itself and pass it to the construtor as its
first argument.

Let's say we want a concordance of all the accusative names. We build a
list of tokens where each token is a tuple: form,pos\_case, so that it
will be easier to query it later

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}62}]:} \PY{c+c1}{\PYZsh{} pos and case are the character indexed as nr 0 and 7 in the postag string}
         \PY{n}{postoks} \PY{o}{=} \PY{p}{[}\PY{p}{(}\PY{n}{w}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{w}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{+}\PY{n}{w}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{7}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{w} \PY{o+ow}{in} \PY{n}{tbtokens}\PY{p}{]}
         \PY{n}{posindex} \PY{o}{=} \PY{n}{CitableConcordanceIndex}\PY{p}{(}\PY{n}{postoks}\PY{p}{,} \PY{n}{tbcites}\PY{p}{,} \PY{n}{key}\PY{o}{=}\PY{k}{lambda} \PY{n}{x}\PY{p}{:}\PY{n}{x}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
         \PY{n}{posindex}\PY{o}{.}\PY{n}{print\PYZus{}concordance}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{na}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{lines}\PY{o}{=}\PY{l+m+mi}{20}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Displaying 20 of 2873 matches:
 στόλον ἡμέτερον νάιον ἀρθέντ̓ ἀπὸ προστομίων  (tlg0085.tlg001:2)
 Δίαν δὲ λιποῦσαι χθόνα σύγχορτον Συρίᾳ φεύγ (tlg0085.tlg001:4)
 χθόνα σύγχορτον Συρίᾳ φεύγομεν , οὔτιν̓ ἐφ̓  (tlg0085.tlg001:5)
τον Συρίᾳ φεύγομεν , οὔτιν̓ ἐφ̓ αἵματι δημηλασίαν ψήφῳ πόλεως γνωσθεῖσαν , ἀλλ̓ αὐτογενε (tlg0085.tlg001:6)
 γνωσθεῖσαν , ἀλλ̓ αὐτογενεῖ φυξανορίᾳ γάμον Αἰγύπτου παίδων ἀσεβῆ ̓ ξονοταζόμεναι  (tlg0085.tlg001:9)
τ̓ ἀχέων ἐπέκρανε , φεύγειν ἀνέδην διὰ κῦμ̓ ἅλιον , κέλσαι δ̓ Ἄργους γαῖαν , ὅθεν  (tlg0085.tlg001:14)
έδην διὰ κῦμ̓ ἅλιον , κέλσαι δ̓ Ἄργους γαῖαν , ὅθεν δὴ γένος ἡμέτερον τῆς οἰστροδόν (tlg0085.tlg001:15)
ιὸς εὐχόμενον τετέλεσται . τίν̓ ἂν οὖν χώραν εὔφρονα μᾶλλον τῆσδ̓ ἀφικοίμεθα σὺν το (tlg0085.tlg001:19)
ὕπατοί τε θεοί , καὶ βαρύτιμοι χθόνιοι θήκας κατέχοντες , καὶ Ζεὺς σωτὴρ τρίτος , ο (tlg0085.tlg001:25)
τος , οἰκοφύλαξ ὁσίων ἀνδρῶν , δέξασθ̓ ἱκέτην τὸν θηλυγενῆ στόλον αἰδοίῳ πνεύματι χώ (tlg0085.tlg001:27)
ν ἀνδρῶν , δέξασθ̓ ἱκέτην τὸν θηλυγενῆ στόλον αἰδοίῳ πνεύματι χώρας · ἀρσενοπληθῆ δ̓ (tlg0085.tlg001:28)
αἰδοίῳ πνεύματι χώρας · ἀρσενοπληθῆ δ̓ ἑσμὸν ὑβριστὴν Αἰγυπτογενῆ , πρὶν πόδα χέρσῳ (tlg0085.tlg001:30)
 πνεύματι χώρας · ἀρσενοπληθῆ δ̓ ἑσμὸν ὑβριστὴν Αἰγυπτογενῆ , πρὶν πόδα χέρσῳ τῆδ̓ ἐν  (tlg0085.tlg001:30)
ῆ δ̓ ἑσμὸν ὑβριστὴν Αἰγυπτογενῆ , πρὶν πόδα χέρσῳ τῆδ̓ ἐν ἀσώδει θεῖναι , ξὺν ὄχῳ  (tlg0085.tlg001:31)
ρων , ὧν θέμις εἴργει , σφετεριξάμενοι πατραδέλφειαν τήνδ̓ ἀεκόντων ἐπιβῆναι . νῦν δ̓ ἐπικε (tlg0085.tlg001:38)
ων ἐπιβῆναι . νῦν δ̓ ἐπικεκλομένα Δῖον πόρτιν ὑπερ - πόντιον τιμάοῤ , ἶνίν τ̓ ἀνθον (tlg0085.tlg001:41)
πικεκλομένα Δῖον πόρτιν ὑπερ - πόντιον τιμάοῤ , ἶνίν τ̓ ἀνθονομούσας προγόνου βοὸς ἐ (tlg0085.tlg001:42)
α Δῖον πόρτιν ὑπερ - πόντιον τιμάοῤ , ἶνίν τ̓ ἀνθονομούσας προγόνου βοὸς ἐξ ἐπιπν (tlg0085.tlg001:42)
ούσας προγόνου βοὸς ἐξ ἐπιπνοίας Ζηνὸς ἔφαψιν · ἐπωνυμίᾳ δ̓ ἐπεκραίνετο μόρσιμος αἰὼ (tlg0085.tlg001:45)
δ̓ ἐπεκραίνετο μόρσιμος αἰὼν εὐλόγως , Ἔπαφόν τ̓ ἐγέννασεν · ὅντ̓ ἐπιλεξαμένα , νῦν  (tlg0085.tlg001:48)

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}61}]:} \PY{n}{postoks}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{5}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}61}]:} [('Ζεὺς', 'n'),
          ('μὲν', 'g'),
          ('ἀφίκτωρ', 'n'),
          ('ἐπίδοι', 'v'),
          ('προφρόνως', 'd')]
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}63}]:} \PY{n}{word} \PY{o}{=} \PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{ἄναξ}\PY{l+s+s2}{\PYZdq{}}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}64}]:} \PY{n}{half\PYZus{}width} \PY{o}{=} \PY{p}{(}\PY{l+m+mi}{80} \PY{o}{\PYZhy{}} \PY{n+nb}{len}\PY{p}{(}\PY{n}{word}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{l+m+mi}{2}\PY{p}{)} \PY{o}{/}\PY{o}{/} \PY{l+m+mi}{2}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}65}]:} \PY{n}{half\PYZus{}width}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}65}]:} 37
\end{Verbatim}
            

    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
